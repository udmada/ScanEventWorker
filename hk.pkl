amends "package://github.com/jdx/hk/releases/download/v1.36.0/hk@1.36.0#/Config.pkl"
import "package://github.com/jdx/hk/releases/download/v1.36.0/hk@1.36.0#/Builtins.pkl"

hooks {
  ["pre-commit"] {
    fix = true
    stash = "git"
    steps {
      ["pkl-gen"] {
        glob = ".github/pkl/**/*.*"
        fix = "mise run pkl:gen && git add .github/"
      }
      ["dotnet-format"] {
        glob = "src/**/*.*"
        fix = "dotnet format"
        check = "dotnet format --verify-no-changes"
        stage = "src/"
      }
      ["dotnet-build"] {
        glob = List("src/**/*.*", "**/*.slnx")
        check = "mise run build"
      }
    }
  }
  ["pre-push"] {
    steps {
      ["dotnet-test"] {
        check = "mise run test"
      }
    }
  }
}
